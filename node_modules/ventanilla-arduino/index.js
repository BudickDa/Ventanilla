//get Johnny Five
var five=require('johnny-five');
var ventanilla = require("ventanilla");

var actors = require('./actors');
var sensors = require('./sensors');

exports.initBoard = function(block){
  if(blocks[block.uid]===undefined){
    console.log("Will create Board " + block.name + " - initilizing");
    try{
      blocks[block.uid] = new five.Board({port:block.hardware.port});
      //blocks[block.uid].sensors = [];
      blocks[block.uid].block = block;
      blocks[block.uid].value = {};
      try{
        console.log("Try to register Sockets:");
        for(i in block.pins){
          console.log("Try to register Pin "+block.pins[i].pid);
          ventanilla.sendData(block.pins[i].uid,block.pins[i],block.type);
        }
      }
      catch(e){
        console.log("Error in initBoard in ventanilla-arduino/index at sending Ports: " + e);
      }
    }catch(e){
      console.log("Error in initBoard in ventanilla-arduino/index at creating arduino block: " + e);
    }
  }
  else{
    console.log("This board is already registered");
  }
}

exports.initSensor = function(block){
  console.log("Will create Sensor " + block.name + " - initilizing");
  return sensors.registerSensor(block,ventanilla.sendData);
}
