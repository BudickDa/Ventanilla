var five = require('johnny-five');
var initFunctions = {};

//todo: comment
initFunctions.LD35 = function(block,input){
  var LD35 = new five.Sensor(block.hardware);
  LD35.board = blocks[input]
  LD35.uid = block.uid;
  LD35.output = function(v){
    return {'celsius': (v * 500)/1024, 'voltage': v};
  }
  return LD35;
}

//todo: comment
initFunctions.Potentiometer = function(block){
  Potentiometer = new five.Sensor({
    pin: block.hardware.pin,
    freq: block.hardware.freq
  });
  Potentiometer.uid = block.uid;
  Potentiometer.output = function(v){
    return {'ohm': v};
  }
  return Potentiometer;
}

//init Sensors


exports.registerSensor = function(block,cb){
  console.log("Blocks: ");
  console.log(blocks);
  console.log("Block to register: ");
  console.log(block);
  if(initFunctions[block.name]!==undefined){
    for(i in block.input){
      console.log(blocks[block.input[i]]);
      blocks[block.input[i]].on("ready", function() {
        cb(initFunctions[block.name](block,block.input[i]));
      });
    }
  }else{
    console.log("Sensor: Type is undefined!");
  }
}


