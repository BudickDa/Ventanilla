var five = require('johnny-five');
var initFunctions = {};

//todo: comment
initFunctions.LD35 = function(sensor){
  var LD35 = new five.Sensor(sensor.pin);
  LD35.uid = sensor.uid;
  LD35.output = function(v){
    return {'celsius': (v * 500)/1024, 'voltage': v};
  }
  return LD35;
}

//todo: comment
initFunctions.Potentiometer = function(sensor){
  Potentiometer = new five.Sensor({
    pin: sensor.pin,
    freq: sensor.freq
  });
  Potentiometer.uid = sensor.uid;
  Potentiometer.output = function(v){
    return {'ohm': v};
  }
  return Potentiometer;
}

//init Sensors
exports.init = function(board,cb){
  board.sensors = [];
  return cb(board);
}

exports.registerSensor = function(hardware,interface,sensor,cb){
  if(initFunctions[sensor.type]!==undefined){
    hardware.arduinoBoards[interface.uid].sensors[sensor.uid] = initFunctions[sensor.type](sensor);
    console.log("initiated Sensor: "+sensor.uid);
    return cb(hardware.arduinoBoards[interface.uid].sensors[sensor.uid]);
  }else{
    console.log("Sensor: Type is undefined!");
  }
}


