var modules = {};
/*
* Initilize hardware
* Input: config is a dynamicly generated file. It contains:
* - which boards shall be included and what ports do they have
*/
exports.init = function(){
  if(module_exists('ventanilla-arduino')){
    modules.arduino = require('ventanilla-arduino');
  }
  if(module_exists('.logicTypes')){
    modules.logicTypes = require('.logicType');
  }
  return true;
}



/*Helper*/
var module_exists = function(name){
  try {return require.resolve(name)}
  catch(e){return false}
}

exports.registerBlock = function(block,blocks,cb){
  if(block.system === "arduino"){
    if(modules.arduino !== undefined){
      if(block.type === "Sensor"){
        modules.arduino.registerSensor(block,cb);
      } else if(block.type === "ArduinoUno"){
        modules.arduino.initBoard(block,cb);
      }
      else{
        console.log("Error in RegisterBlock: Blocktype is not available in System Arduino")
      }
    }else{
      console.log("Error in RegisterBlock: Arduinomodul is not available.")
    }
  }
  else if(block.system == "Logic"){
    console.log("This Block is Logic.")
    console.log(block);
    modules.logicTypes[block.name](block,blocks,cb);
  }
}

